Frequently Asked Questions (FAQ)
========

This FAQ is designed to answer the most common questions, please take your time to read it before you ask anything.

:warning: We are not responsible for external content! :warning:

Index
-----

* [Quick Guide](#quick-guide)
* [Frequently asked questions](#frequently-asked-questions)

Quick Guide
-----------

Using AFWall+ the first time:

1. Click on _Mode_ to switch between whitelist- (default enabled) and blacklist-mode.
2. Mark the applications that you want to block or allow (depending on the selected mode), for each interface.
3. Open the menu and enable the firewall (green shield means enabled). If AFWall+ is already enabled, just select _Apply_ and it will submit your changes.
4. The rules will be saved and automatically and restored when you restart your phone. If not check the "data leak" option.
5. If you want to check all current iptables rules, select _Firewall Rules_ in the menu.

Widget(s)

To quickly enable or disable the firewall, add the AFWall+ widget to your home screen. 
There is no Widget description, the green shield means that the firewall is running, red means it's disabled. 
AFWall+ comes with three widgets, an settings widget, and two to toggle the firewall between enabled/disabled.

Firewall logs

If you want to see which applications have been blocked by AFWall+, open the menu and enable the Log.
AFWall+ will then log each application blocked. You can check the log by opening the menu and selecting _More_ -> _Show log_.

Password lock/unlock

You can set a password lock for AFWall+ by using the set _password_ menu option.
To remove the password protection, just reset it to blank (enter none).

Frequently asked questions
--------------------------

<a name="FAQ1"></a>
##### (1) What is iptables?

> Please take a look [[here|IPtables]] for a detailed overview.

<a name="FAQ2"></a>
##### (2) How do I know if my phone supports iptables?

> Use the following command in ADB shell or in Terminal Emulator as root (`su`):

<code>iptables -L -t nat</code>

To check on which place iptabes are stored simply use:
```
which iptables
which ip6tables
```

<a name="FAQ3"></a> 
##### (3) Packet processing in iptables

> All packets inspected by iptables pass through a sequence of built-in tables (queues) for processing. Each of these queues is dedicated to a particular type of packet activity and is controlled by an associated packet transformation/filtering chain.
* Forward (FORWARD) chain: Filters packets to servers protected by the firewall.
* Input (INPUT) chain: Filters packets destined for the firewall.
* Output (OUTPUT) chain: Filters packets originating from the firewall. 
* Prerouting (PREROUTING) chain: Address translation occurs before routing. Facilitates the transformation of the destination IP address to be compatible with the firewall's routing table.
* Postrouting (POSTROUTING) chain: Address translation occurs after routing. This implies that there was no need to modify the destination IP address of the packet as in pre-routing.
* Output (OUTPUT) via nat: Network address translation for packets generated by the firewall.

<a name="FAQ4"></a>
##### (4) Is a reboot required after edit/saving iptables?

> Changes to iptables take effect immediately when they are run. If you are making your changes in a script, you must make sure that script gets run in order for the changes to take affect. The rules are enforced as soon as the actual commands are sent to the kernel. You will need to figure out how to run the script or apply whatever conf changes you have saved to a file. A reboot actually clears all iptables rules. On first boot the tables will always be empty, you always have to set all the rules after booting. That's what the AFWall+ automatically does (make sure it's enabled).

<a name="FAQ5"></a>
##### (5) How long does it take for an iptables rule to apply?

> Iptables rules take effect immediately. Because your script is appending (-A) to the INPUT and OUTPUT chains, your rules are being added to the end of those chains. If you have other terminating rules that precede these rules, then they will take effect (and later rules will not).

<a name="FAQ6"></a>
##### (6) What is Active Rules?

> AFWall+ doesn't have control over iptables itself. Any root/system application with access to iptables can modify the rules. That's the reason, some time people gets app data leaks because some other process might have overwritten the OUTPUT chain to allow itself. To prevent this, AFWall+ will apply rules on every connectivity change. 

> Also for roaming/LAN, AFWall+ need to change the iptables rules in order to check Roaming status and LAN ip address.

<a name="FAQ7"></a>
##### (7) YouTube/Online Radio streaming is not working anymore. How can i fix this without disabling AFWall+?

> Please whitelist "Media Server" or remove it from your blacklist.

<a name="FAQ8"></a>
##### (8) What does the little icons on top of the application(s) list stand for?

> From left to the right the icons meaning the following:

> **LAN** = All internal Local Area Network (LAN) traffic (default disabled, needs to be enabled in the options)

> **WIFI** = All traffic that goes through the wlan0 interface

> **Mobile** = All traffic that comes in/out from 2G/3G/4G/5G

> **Roaming** = Global roaming traffic which coasts money dependency on which provider you are connected to (default disabled, needs to be enabled in the options)

> **VPN** = All Virtual Private Network traffic e.g. from the Tor Network, OpenVPN or other providers (default disabled, needs to be enabled in the options)

<a name="FAQ9"></a>
##### (9) My Logs (logcat) are not displaying anything or are always empty, why?

> AFWall+ logs are depend on dmesg (kernel logs). Either your kernel disabled dmesg or it's getting overwritten quickly. Please check if you kernel does have an option like "Android logger Control" or something like that an enable this service.

<a name="FAQ10"></a>
##### (10) Does AFWall+ support Android 4.3, 4.4 or higher?

> Yes, it works with newer Android OS versions too!
* UID 0 (root) needs 53/udp open for DNS on Android 4.3. - Enable DNS from application list!
* UID 1000 (system) needs 123/udp open for NTP. - Enable NTP from application list!
* Android L need a little configuration change and a external Busybox app to get the rules apply.

<a name="FAQ11"></a>   
##### (11) Can I block incoming SMS? - Premium SMS Warning

> Android OS (5+) includes support for warning users of any outgoing premium SMS message. Premium SMS messages are text messages sent to a service registered with a carrier that may incur a charge to the user. Device implementations that declare support for _android.hardware.telephony_ MUST warn users before sending a SMS message to numbers identified by regular expressions defined in <code>/data/misc/sms/codes.xml</code> file in the device. The upstream Android Open Source Project provides an implementation that satisfies this requirement. See [here](https://github.com/ukanth/afwall/issues/111) for more information.

<a name="FAQ12"></a>
##### (12) Can I block IPv6 traffic?

> [Sure](https://github.com/ukanth/afwall/issues/108), please use AFWall+ 1.2.4 (or higher). Some kernels have an option to disable IPv6, make sure it's enabled (reboot required). _Enable IPv6 support_ in AFWall+ options because this is disabled by default. Take also a closer look about the important notes from IPv6 over [here](https://github.com/ukanth/afwall/wiki/CustomScripts#important-notes-about-ipv4-and-ipv6-differences).

> If you use custom scripts this option could be problematic in some cases, uncheck it if you script is okay but AFWall+ doesn't apply it.

<a name="FAQ13"></a>
##### (13) Is there Tasker/Locale support?

> Tasker/Locale apps working together with AFWall+ (1.0.4a or higher).

<a name="FAQ14"></a>
##### (14) UDP Port 53 is blocked if whitelisting mode is enabled, why?

> Please read [this](https://github.com/ukanth/afwall/issues/18). It's **disabled by default**.
Enable DNS from application list will unlock it.

<a name="FAQ15"></a>
##### (15) How can I show actually used iptables rules?

> Via  _iptables -L_ command in apps like Android Terminal Emulator. Most ROM's comes already with this. 

Or 

> Via <code>Firewall rules</code> from the AFWall+ preferences. 

<a name="FAQ16"></a>
##### (16) My Apps can bypass AFWall+ whitelist mode before the boot are complete

> Please read [this](https://github.com/ukanth/afwall/wiki/Apps-leak-user-privacy-data-during-boot).

> If you want to see what is connecting during the boot take a look at the _/proc/uid_stat/_ folder.

**Important note:** [procfs](http://linux.die.net/man/5/proc) is mounted at boot time, which means that every time your device is rebooted  there're 0 traffic values for all UIDs. You can list _/proc/uid_stat/_ dir right now to see which UIDs have been spending traffic since last reboot.

<a name="FAQ17"></a>
##### (17) How do I display all available network interfaces names using bash shell prompt?

> Open Android Terminal Emulator and type this:

<code>$ ip link show</code>

> Each network interface config is stored under the <code>/sys/class/net/</code> dir. If you list that dir on Android, you'll probably see [something like that](http://developer.android.com/reference/android/net/TrafficStats.html):

    $ ls sys/class/net
    lo
    dummy0
    ifb0
    ifb1
    rmnet0
    rmnet1
    rmnet2
    usb0
    sit0
    ip6tnl0
    gannet0
    tun
    eth0

<a name="FAQ18"></a>
##### (18) How can I purge the iptables rules?

> Open adb shell or Android Terminal Emulator and type this:

    su
    iptables -F
    iptables -X
    Reboot

> You can also do this via <code>Firewall Rules</code> option and click on the <code>flush rules</code> button. 

<a name="FAQ19"></a>
##### (19) AFWall+ does not show app xyz in my list, why?

> Only apps are listed that have **internet permissions** in the AndroidManifest.xml. If it's not listed this means that this app [don't use any internet permission](http://developer.android.com/reference/android/Manifest.permission.html). 

<a name="FAQ20"></a>
##### (20) AFWall+ does not work under CM 7.x - 12.x, how can i fix this?

> CM 7.x uses an old version of iptables which has maybe conflicts with AFWall+ own built-in iptables. As a workaround you can try to update your iptables to the latest version. But it should work without it. 
CM 11 users may need to change the busybox version from _bultin_ to _system busybox_. Of course you need to install it first.
CM 12 users may need to change the busybox version from _bultin_ to _system busybox_. Of course you need to install it first.

<a name="FAQ21"></a>
##### (21) How to install AFWall+ as a regular app?

> Just download it via Google Play Store, F-Droid or GitHub and install it - that's it! 

> Advance users can directly install it via adb:

<code> adb install afwall+.apk </code> (default install method)

> Or you may also copy and download the afwall+.apk file on your device and install it using any file explorers. 

<a name="FAQ22"></a>
##### (22) How to install AFWall+ as system app (**not recommend, only for test reasons!**)

    adb remount
    adb push afwall+.apk /system/app (or /system/priv-app/ Android 4.3 or higher)

> You may an also move the .APK file to the _/system/app_ directory manually. Make sure you set the file permission properly _-rw-r--r--_. To uninstall, please remove afwall+.apk from _/system/app_ manually.

<a name="FAQ23"></a>
##### (23) Which Permissions are used?

>* _RECEIVE_BOOT_COMPLETED_: Autostart (Bootup) AFWall+ after the system finishes booting.
* _ACCESS_NETWORK_STATE_: Allows AFWall+ to access information about networks (iptables).
* _WRITE_EXTERNAL_STORAGE_: Allows AFWall+ to write to external storage for debug log and export iptables rules.
* _ACCESS_SUPERUSER_: Standard to support Superuser ([by Koushik](http://www.androidpolice.com/2013/02/25/koush-releases-free-open-source-superuser-app-with-support-for-multi-user-tablet-ui-x86arm-pin-and-effort-for-apps-to-declare-root-permission/)).
* _INTERNET_ : NetworkInterface.getNetworkInterfaces() needs android.permission.INTERNET. This is just being used to get the IPv4 and IPv6 addresses/subnets for each interface, so the LAN address ranges can be determined. Nothing is actually trying to access the network.
* _ACCESS_WIFI_STATE_ : Added to detect tether state.

<a name="FAQ24"></a>
##### (24) How can I disable the firewall temporarily?

> If you need to disable the firewall temporarily, you can flush all the rules by using

<code>iptables -F</code>

Or via an external script:

    echo "Stopping firewall and allowing everything..."
    iptables -F
    iptables -X
    iptables -t nat -F
    iptables -t nat -X
    iptables -t mangle -F
    iptables -t mangle -X
    iptables -P INPUT ACCEPT
    iptables -P FORWARD ACCEPT
    iptables -P OUTPUT ACCEPT
    exit 0

Or within the app itself or via the AFWall+ widget.

<a name="FAQ25"></a>
##### (25) Can you help me with rooting my device?

> There are already enough guides to help you to root your device. Use your favorite search engine to find one.

<a name="FAQ26"></a>
##### (26) Does AFWall+ needs a lot of battery/memory?

> Not really. Usually around _11 - 16 MB_ (non shared memory), dependent which configuration you use.

<a name="FAQ27"></a>
##### (27) How safe is AFWall+?

> Nothing is really safe, see the [limitations](https://github.com/ukanth/afwall#limitations) in the README.md for more details, but it's better to install a Firewall and control the incoming/outgoing packages than have nothing installed. If the app may crash sometimes than feel free to submit a error log report via eMail or here on our GitHub Issue tracker, we are always motivated to fix problems and answer your questions as soon as possible.

<a name="FAQ28"></a>
##### (28) How can I make a logcat to indicate which case the crash?

> Please take a deeper look at our [[Howto report a bug|HOWTO Report Bug]] page for additional details. 

<a name="FAQ29"></a>
##### (29) Will there be an iOS or Windows Phone version?

> No, because it's too difficult to implement something like AFWall+ on these OS's, because they are not open source and/or not supporting netfilters.

<a name="FAQ30"></a>
##### (30) Does AFWall+ work with SELinux (aka Fort Knox)?

> It should be without any bigger problem. For more info please look [here](http://www.selinuxproject.org/page/Main_Page) and [here](https://danwalsh.livejournal.com/28545.html).

> To toggle between enforcing and permissive mode just use adb
```
# 1 = enforcing mode / 0 = permissive 
adb shell su 0 setenforce 1
# On an emulator use
emulator -selinux permissive
```

<a name="FAQ31"></a>
##### (31) Can AFWall+ be detected by other applications?

> Yes, but it should be no security problem as long as the rules not get touched. 

<a name="FAQ32"></a>
##### (32) Do I need to have the Google Play Store installed for the donate version?

> No! There is no hidden license check integrated. There is also no "call home" function. 

<a name="FAQ33"></a>
##### (33) What happens if I make AFWall+ device administrator?

> Android includes features that allow security-aware applications to perform device administration functions at the system level, such as enforcing password policies or performing remote wipe, through the Android Device
Administration API. This ensures that other applications cannot uninstall AFWall+ without your knowledge. Device implementations must provide an implementation of the _DevicePolicyManager_ class. Device implementations that include support for lock screen must support the full range of device administration policies defined in the Android SDK documentation and report the platform feature _android.software.device_admin_.

<a name="FAQ34"></a>
##### (34) Why the Kernel need an internet connection all the time? AFWall+ shows AppID (-11) blocked.

> The kernel does not communicate directly, it only pass packet information (for the interfaces e.g. uid0) from some applications.
One problem with using policy routing based on fwmark with locally generated traffic (as is the case with Android) is that the mark must be set in the user process. It is because the routing decision is made before the fwmark can be set in any iptables rule, at least in vanilla kernels.

> Since Android 4.3 and higher all DNS-requests are manged by the netd daemon, it works similar like an proxy/tunnel. That means AFWall+ can't detect the special UID's/DNS-requests. To disable such behavior you can use the _DNS-Proxy_ option under _Preferences_. Choose _Disable DNS via netd_ to restore the default behavior before 4.3. Now you should make sure that your apps are whitelisted, if not it will be blocked, same with your (Root) application, if not Android is maybe not able to establish a connection. Dnsproxy2, is an alternative app to redereict DNS-requests. But if there are troubles with your connection, check your logs, use Netzwerk Log app (identify all traffic), whitelist the specific app(s) that is maybe blocked or enable the netd daemon again. 

<a name="FAQ35"></a>
##### (35) Why was my issue closed?

> Things like ***It doesn't work* or *it crashes* is insufficient**. So, please describe the exact steps to reproduce the problem and always provide a logcat. More info always means that we can better help you. 

> It's also possible your issue is a duplicate, or is already fixed. Please watch the Changelog.md and TODO.md files carefully.

<a name="FAQ36"></a>
##### (36) Does AFWall+ support nftables yet?

> No, AFWall+ does not support [nftables](https://github.com/ukanth/afwall/issues/293) yet. There is currently no Android nftables firewall available on the whole www.

<a name="FAQ37"></a>
##### (37) Can I use XPrivacy, Lightning Wall, or any other Firewalls/Security apps together with AFWall+?

>* XPrivacy: should work fine, if you not restrict any AFWall+ or System related important features like 'IPC' or internet access. Be careful, if there is any problem you can watch what is blocked under the watch list in XPrivacy and try to remove it. 
* Lightning Wall: works fine together with AFWall+, because it does not interact with the existent iptables (leave iptables unchecked).
* Avast: please disable this firewall if it's turned on (unchecked by default).
* Android Tuner: Same as Avast, but the Firewall is disabled by default.
* DonkeyGuard: It can't control iptables, but Android's permission, so generally it work but don't restrict some important functions like _write_external_storage_, or AFWall+ log can't be created on your sdcard. 
* orWall: orWall is not compatible with AFWall+. Please disable it and enable the _Transparent Proxy_ option in Orbot.
* Adblock Plus: Comes with there own iptables, but it should be no problem to use it together with AFWall+. If something went wrong and you like to report a bug, please disabled it first and try to reproduce the problem, if you manually created/enabled a proxy, shut it down first.

> Generally it's not necessary to use two firewalls together and it could be problematic if you don't know what you are doing, or did you use two knifes at the same time? :8ball:

<a name="FAQ38"></a>
##### (38) Will you integrate any HOSTS blocking option?

> No (see [#285](https://github.com/ukanth/afwall/issues/285) & [#223] (https://github.com/ukanth/afwall/issues/223)), AFWall+ is a firewall and not a all-in-one solution for all "security" related problems on Android. The goal is to control iptables with some gimmicks such custom scripts and this already implemented.
A big [hosts](http://en.wikipedia.org/wiki/Hosts_%28file%29) file can also slow-down non high end smartphones, block some ads which some developer need to get money and can block some sites you may need. There are also other solutions to handle it, like MoaAB or and Xposed module called UnbelovedHosts.

<a name="FAQ39"></a>
##### (39) Can I ask xyz that was not written down here?

> If you have any question, please leave a message in the [XDA AFWall+ forum thread](http://forum.xda-developers.com/showthread.php?t=1957231).

**If possible please do not ask questions using GitHub issues report!** Because GitHub issues are designed for bug reports and feature requests.

<a name="FAQ40"></a>
##### (40) Is there a BusyBox solution that doesn't need root?

> Yes, there is a solution coded by [Jared Burrows](https://plus.google.com/+JaredBurrows) but it doesn't provide all extra binaries, the most common used are included in this package. Visit [this page](http://www.burrowsapps.com/) for more information, or get it directly from Google Play Store. We not recommend to use it!

<a name="FAQ41"></a>
##### (41) What is UID?

> The Android OS is based on Linux, so basically it's the same UID you have in a Unix-like OS. When installing an app/package, Android by default creates a [UID](http://developer.android.com/reference/android/os/Process.html#myUid%28%29) specifically for that package, so that it can have its private resources/storage space. When no packages are using anymore that UID (which could be shared), the UID is deleted.

> We can override this behavior with [android:sharedUserId](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid), but it has some [drawbacks](http://stackoverflow.com/questions/5529846/androidprocess-and-process-name/5530160#5530160).

<a name="FAQ42"></a>
##### (42) How to change the DNS Settings on Android? (optional)

> On Android <4.4 we can use the command <code>getprop | grep dns</code> to know all the DNS properties being used. This command requires BusyBox! 
> 'rmnet0â€™ is the interface name for the 3G connection. net.rmnet0.dns1 and net.rmnet0.dns2 are the properties to be changed to point to OpenDNS server (the settings are still present in CM/AOSP code). Since, these properties are changed after the connection is established, net.dns1 and net.dns2 also have to be changed.
Execute these commands as root user: <code>setprop net.rmnet0.dns1 208.67.222.222.</code> <code>setprop net.rmnet0.dns2 208.67.220.220</code>. <code>setprop net.dns1 208.67.222.222</code>. <code>setprop net.dns2 208.67.220.220</code>.
> Remember, the settings will be applicable only for the current session! You will have to repeat it when you are re-connecting to the network.

> Android system chooses the DNS servers using the script located at _/system/etc/dhcpcd/dhcpcd-hooks/20-dns.conf_

<code>20-dns.conf</code>

To change the DNS servers, use the command _setprop property name_
<pre>
setprop net.dns1=208.67.222.222
setprop net.dns2=208.67.220.220
setprop net.eth0.dns1=208.67.222.222
setprop net.eth0.dns2=208.67.220.220 
setprop net.rmnet0.dns1=208.67.222.222
setprop net.rmnet0.dns2=208.67.220.220
setprop dhcp.tiwlan0.dns1=208.67.222.222
setprop dhcp.tiwlan0.dns2=208.67.220.220
setprop net.ppp0.dns1=208.67.222.222
setprop net.ppp0.dns2=208.67.220.220
setprop net.pdpbr1.dns1=208.67.222.222
setprop net.pdpbr1.dns2=208.67.220.220</pre>

Or via init.d script (won't reapply after connectivity change):
<pre>
#!/system/bin/sh
setprop dhcp.tiwlan0.dns1 208.67.222.222
setprop dhcp.tiwlan0.dns2 208.67.220.220
setprop net.ppp0.dns1 208.67.222.222
setprop net.ppp0.dns2 208.67.220.220
setprop net.dns1 208.67.222.222
setprop net.dns2 208.67.220.220
setprop net.rmnet0.dns1 208.67.222.222
setprop net.rmnet0.dns2 208.67.220.220
setprop net.pdpbr1.dns1 208.67.222.222
setprop net.pdpbr1.dns2 208.67.220.220</pre>

To check against it (on e.g. wlan) use
<pre>
tcpdump -ns0 -i wlan0 'port 53'</pre>

> [MyResolver](http://myresolver.info/) is a secure proof if DNS is working or not. Please remember that there are some problems generally with the DNS security protocol, there are several known attacks, like DOS, Cache poisoning, ghost domain names & [others](http://ianix.com/pub/dnssec-outages.html). For more information take a look over [here](http://www.theregister.co.uk/2015/03/18/is_the_dns_security_protocol_a_waste_of_everyones_time_and_money/#)

> If there is no setprop you can write the values before the <code>unset_dns_props()</code> begins. Here is an [example 20-dns.conf file](https://gist.github.com/CHEF-KOCH/b054c88d8ba7975a1517). You can get the dns information by using the _getprop | grep dns_ command but this will only work for Android <4.3 devices. 

> The <code>getprop</code> or <code>setprop</code> method **does not work on Android versions >4.4+** anymore. Those values, when changed, get simply ignored by the _netd_ daemon. It's necessary to communicate directly to the daemon via the <code>/dev/socket/netd socket</code>. In Android it's now present a tool called <code>ndc</code> which does exactly this job.

On 4.3 or 4.4 KitKat (#su):
<pre>
ndc resolver setifdns eth0 "" 208.67.222.222  208.67.220.220 192.168.1.1
ndc resolver setdefaultif eth0</pre>

Or via AFWall+ custom script:
<pre>
$IPTABLES -t nat -D OUTPUT -p tcp --dport 53 -j DNAT --to-destination 208.67.222.222:53 || true
$IPTABLES -t nat -D OUTPUT -p udp --dport 53 -j DNAT --to-destination 208.67.222.222:53 || true
</pre>

Or via init.d:
<pre>
#!/system/bin/sh
# File without file extension

IP6TABLES=/system/bin/ip6tables
IPTABLES=/system/bin/iptables

# Maybe need to change $IPTABLES to iptables if there are troubles apply them
$IPTABLES -t nat -I OUTPUT -p tcp --dport 53 -j DNAT --to-destination 208.67.222.222:53
$IPTABLES -t nat -I OUTPUT -p udp --dport 53 -j DNAT --to-destination 208.67.222.222:53</pre>

> Only _Google Puplic DNS_ supports native IPv6 atm! So uncheck IPv6 in your kernel (if checked!) or disable it via custom script.

> If you still like external apps, you should take a look at DNS Forwarder and Override DNS [tested, working on 4.4.4] which does more or less the same. That may solve some problems on Android 4.4/L but there is no guarantee, some ROM's may handle it different (still buggy/limitation).

<a name="FAQ43"></a>
##### (43) Will there a "Connection confirm dialog" (on-demand) feature implemented soon?

> It's already been asked [#269](https://github.com/ukanth/afwall/issues/269), there is currently no Android firewall which include such feature yet. There is no on-demand firewall based on iptables available on Google Play Store or F-Droid. 

<a name="FAQ44"></a>
##### (44) Will you implement an Adblock function, and why are some Ads are still visible if I try to block them via iptables?

> First of all, AFWall+ is not an Ad-blocker! It's a firewall, which is not able (and never will be) to block all your visible ads and there are some good reason. Some app developer make money with in-app advertising (ie AdMob) and if we block this, no one is motivated to make some awesome apps anymore. If you really want to block such ads, you still can use MinMinGuard, but it's [general a bad idea to block all things](http://forum.xda-developers.com/showpost.php?p=49112940&postcount=1). For a quick overview over ad blocking please take a look at the [Wikipedia article](http://en.wikipedia.org/wiki/Ad_filtering).

> So I blocked my ads with ad server hostnames and IP addresses, why they are still visible?

> There are [some limitations](https://adblockplus.org/en/android-config#proxy) e.g. Adblock Plus for Android does not allow ads to be blocked on https/SSL encrypted websites [due Android limitations], some ad-servers use a proxy behind it, and it's generally hard to filter JavaScript generated content, currently there is no element hiding addon for Android. 
The easiest way is to block ads on Android seems to manipulate your DNS/Hosts file, for this you can use [this](http://hosts-file.net/?s=Download) or [this](forum.xda-developers.com/showthread.php?t=1916098&page=201) Hosts file which getting regular updates. There are [some alternative ways](https://sfxpt.wordpress.com/2011/02/21/the-best-ad-blocking-method/), but on newer Android systems they not seems to work anymore due some internal changes. 

> And why was Adblock Plus removed from Google Play Store?

> Read the full story [here](https://adblockplus.org/blog/adblock-plus-for-android-removed-from-google-play-store).

<a name="FAQ45"></a>
##### (45) I don't have the iptables binary on my phone, what can I do?
> If you have netfilter enabled in your kernel and not have the iptables binary you can use the AFWall+ in-build iptables (make sure you enabled it in the options).

<a name="FAQ46"></a>
##### (46) Is there a good tool to collect Network Info?

> AFWall+ already collect some useful infos in the _Firewall Rules_ dialog but if you need a good and free alternative tool to show some more infos use e.g. Network Info II.

<a name="FAQ47"></a>
##### (47) The startup-script is still present how can I remove it?

> In the normal case AFWall+ should automatically check/detect if you have the _afwallstart_ script in the init.d dir. A simply press on the _Fix Startup Data Leak_ should remove/re-enable it again but in very rare situation maybe the system needs to be remounted again. In this case you can remove the script with your favorite file explorer app under <code>/system/etc/init.d/afwallstart</code> or via ADB/Terminal.
<pre>
su
mount -o remount,rw /system
rm -f /system/etc/init.d/afwallstart
mount -o remount,ro /system
reboot</pre>

<a name="FAQ48"></a>
##### (48) How can my script survive an Over-the-Air (OTA) Update?

> Just navigate to /system/addon.d/ and copy the 50-cm.sh file. You can rename the copy to whatever you want for example 98-myfiles.sh, now open it and search for the line etc/hosts and add the script you want to protect in our case we want to protect the afwallstart script (present if you use the experimental fix data leak option in AFWall+):

```
...
cat <<EOF
etc/init.d/afwallstart
etc/gps.conf
etc/resolv.conf
EOF
...
```
> The last step is to save the file and set the correct permission. (root:root -rwxr-xr-x bzw. 755) 

<a name="FAQ49"></a>
##### (49) How can my script survive an system wipe?

> This is a little bit harder but not impossible. It's almost the same procedure as mentioned in FAQ48 except the dir you need to place the file in; /data/local/userinit.d/ (if not present just create it - root:root -rwxr-xr-x bzw. 755) Now place your script in there. To restore other script just put it under /data/local/. 

````
#!/system/bin/sh
# This is the script /data/local/userinit.d/98-afwallstart-repair 
# (permissions root:root -rwxr-xr-x 755)
# It takes care, that the AFWall+ firewall is correctly blocking network 
# traffic at boot time (see data leak fix)

# We want to write to the system partition
mount -o remount,rw /system

# Take care that (OTA) updates do not break AFWall firewall security 
cp /data/local/afwallstart /system/etc/init.d/afwallstart
chown root:root /system/etc/init.d/afwallstart
chmod 555 /system/etc/init.d/afwallstart

# Take care that system wipes do not harm our tweaks 
# as example we use the script file name "98-myfiles.sh"
# for this, uncomment the following 3 lines = remove the "#"
#cp /data/local/98-myfiles.sh /system/addon.d/98-myfiles.sh
#chown root:root /system/addon.d/98-myfiles.sh
#chmod 755 /system/addon.d/98-myfiles.sh

# lock up system partition read-only
mount -o remount,ro /system
````

<a name="FAQ50"></a>
##### (50) Where are AFWall's settings stored?

> Exported content like profiles are stored under your internal sdcard /sdcard0/afwall all other stuff is stored under /data/data/dec.ukanth.ufirewall/. 

<a name="FAQ51"></a>
##### (51) I get "Unable to parse package." if I try to install AFWall+?

> This means AFWalls's .apk file seems to be corrupt. Try disabling your popup blocker, check your internet connection and re-download the whole apk.

<a name="FAQ52"></a>
##### (52) I use Opera Max as Browser with "Turbo Mode" enabled, why does Ad-blocking/Firewalls seems to not working anymore?

> For debugging and error reporting just disable the "Turbo Mode" option, this is mostly only another term for VPN/Proxy which works behind this option. No Firewall, iptables, Proxy or any external app works with this option enabled, since it's not possible to use two VPNs the same time. It's not possible for any app to look behind this traffic (local). Other Browser may have a similar function or add-ons (like Firefox Janus-Proxy or Chrome's bandwidth safer), make sure it's disabled.

<a name="FAQ53"></a>
##### (53) How can I gather DNS (A/AAA/...) requests?

> Mostly, if not all AOSP based ROMs coming with TCPdump as binary included. So you can just use this, there are several [Tutorial](http://www.kandroid.org/online-pdk/guide/tcpdump.html) and [documents](http://inst.eecs.berkeley.edu/~ee122/fa06/projects/tcpdump-2up.pdf) available. If this is to complicated for you, you can just grab AdAway (needs root) and use there own TCPDump/dnsmasq/libpcap interface to list all requests - it also provides an interface to add them to your hosts or to an separate white-/blacklist.